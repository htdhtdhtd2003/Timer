
<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Barcode Scanner + QR Code</title>
Â  <style>
Â  Â  html, body {
Â  Â  Â  margin: 0; padding: 0; height: 100%;
Â  Â  }
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  display: block;
Â  Â  }
Â  Â  /* Scanner container top half */
Â  Â  #scanner {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 50vh;
Â  Â  Â  background: #ddd;
Â  Â  Â  display: none; /* hidden initially */
Â  Â  }
Â  Â  /* Input field */
Â  Â  #rdac-input {
Â  Â  Â  width: 90%;
Â  Â  Â  margin: 10px auto 5px;
Â  Â  Â  display: block;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  padding: 10px;
Â  Â  }
Â  Â  /* QR code container below input */
Â  Â  #qrcode {
Â  Â  Â  width: 150px;
Â  Â  Â  height: 150px;
Â  Â  Â  margin: 0 auto 15px;
Â  Â  }
Â  Â  /* Buttons container bottom half */
Â  Â  #buttons-container {
Â  Â  Â  width: 100%;
Â  Â  Â  height: 50vh;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 20px;
Â  Â  Â  padding: 20px;
Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  #buttons-container button {
Â  Â  Â  width: 90%;
Â  Â  Â  height: 60px;
Â  Â  Â  font-size: 1.5rem;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  #scan-btn {
Â  Â  Â  background-color: #28a745;
Â  Â  Â  color: white;
Â  Â  }
Â  Â  #toggle-camera-btn {
Â  Â  Â  background-color: #ffc107;
Â  Â  }
Â  </style>
</head>
<body>

Â  <div id="scanner"></div>

Â  <input id="rdac-input" type="text" placeholder="Scan RDAC barcode..." autocomplete="off" />

Â  <div id="qrcode"></div>

Â  <div id="buttons-container">
Â  Â  <button id="scan-btn">ðŸ“· Scan Barcode</button>
Â  Â  <button id="toggle-camera-btn">ðŸ”„ Switch Camera</button>
Â  </div>

Â  <!-- QRCode.js library for generating QR codes -->
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
Â  <script src="https://unpkg.com/html5-qrcode"></script>
Â  <script>
Â  Â  const scannerDiv = document.getElementById('scanner');
Â  Â  const scanBtn = document.getElementById('scan-btn');
Â  Â  const toggleBtn = document.getElementById('toggle-camera-btn');
Â  Â  const rdacInput = document.getElementById('rdac-input');
Â  Â  const qrcodeContainer = document.getElementById('qrcode');

Â  Â  let html5Qrcode;
Â  Â  let scannerStarted = false;
Â  Â  let currentCameraId = null;
Â  Â  let cameras = [];
Â  Â  let isFrontCamera = true;
Â  Â  let qrCode;

Â  Â  // Create QR code instance
Â  Â  function generateQRCode(text) {
Â  Â  Â  qrcodeContainer.innerHTML = ""; // clear old
Â  Â  Â  qrCode = new QRCode(qrcodeContainer, {
Â  Â  Â  Â  text: text,
Â  Â  Â  Â  width: 150,
Â  Â  Â  Â  height: 150,
Â  Â  Â  Â  colorDark: "#000000",
Â  Â  Â  Â  colorLight: "#ffffff",
Â  Â  Â  Â  correctLevel: QRCode.CorrectLevel.H
Â  Â  Â  });
Â  Â  }

Â  Â  function startScanner() {
Â  Â  Â  if (scannerStarted) return;
Â  Â  Â  scannerStarted = true;
Â  Â  Â  scannerDiv.style.display = "block";
Â  Â  Â  html5Qrcode = new Html5Qrcode("scanner");
Â  Â  Â  Html5Qrcode.getCameras().then(devices => {
Â  Â  Â  Â  cameras = devices;
Â  Â  Â  Â  if (devices.length === 0) {
Â  Â  Â  Â  Â  alert("No cameras found");
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  let chosenCamera = isFrontCamera
Â  Â  Â  Â  Â  ? devices.find(cam => cam.label.toLowerCase().includes("front")) || devices[0]
Â  Â  Â  Â  Â  : devices.find(cam => cam.label.toLowerCase().includes("back")) || devices[0];

Â  Â  Â  Â  currentCameraId = chosenCamera.id;

Â  Â  Â  Â  html5Qrcode.start(
Â  Â  Â  Â  Â  currentCameraId,
Â  Â  Â  Â  Â  { fps: 10, qrbox: 250 },
Â  Â  Â  Â  Â  decodedText => {
Â  Â  Â  Â  Â  Â  rdacInput.value = decodedText;
Â  Â  Â  Â  Â  Â  generateQRCode(decodedText);
Â  Â  Â  Â  Â  Â  stopScanner();
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  errorMessage => {
Â  Â  Â  Â  Â  Â  // ignore scanning errors
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  );
Â  Â  Â  }).catch(err => alert("Error accessing cameras: " + err));
Â  Â  }

Â  Â  function stopScanner() {
Â  Â  Â  if (html5Qrcode) {
Â  Â  Â  Â  html5Qrcode.stop().then(() => {
Â  Â  Â  Â  Â  scannerDiv.style.display = "none";
Â  Â  Â  Â  Â  html5Qrcode.clear();
Â  Â  Â  Â  Â  scannerStarted = false;
Â  Â  Â  Â  }).catch(console.error);
Â  Â  Â  }
Â  Â  }

Â  Â  function toggleCamera() {
Â  Â  Â  if (!scannerStarted) return;
Â  Â  Â  isFrontCamera = !isFrontCamera;
Â  Â  Â  stopScanner();
Â  Â  Â  setTimeout(startScanner, 300);
Â  Â  }

Â  Â  // Update QR code when user manually edits input
Â  Â  rdacInput.addEventListener('input', e => {
Â  Â  Â  const val = e.target.value.trim();
Â  Â  Â  if (val) {
Â  Â  Â  Â  generateQRCode(val);
Â  Â  Â  } else {
Â  Â  Â  Â  qrcodeContainer.innerHTML = "";
Â  Â  Â  }
Â  Â  });

Â  Â  scanBtn.addEventListener('click', startScanner);
Â  Â  toggleBtn.addEventListener('click', toggleCamera);
Â  </script>

</body>
</html>
