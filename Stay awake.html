<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wake Lock Test</title>
</head>
<body>
  <h1>🔋 Stay Awake Test</h1>
  <p>Click the button below to keep the screen awake.</p>

  <button onclick="stayAwake()">Activate Stay Awake</button>
  <div id="log" style="margin-top: 20px; font-weight: bold;"></div>

  <script>
    let wakeLock = null;

    async function stayAwake() {
      const log = document.getElementById('log');
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
          log.textContent = '✅ Screen will stay awake.';
          console.log('Wake Lock active');

          wakeLock.addEventListener('release', () => {
            log.textContent = '⚠️ Wake Lock was released.';
            console.log('Wake Lock released, attempting to reacquire...');
            stayAwake();
          });
        } else {
          log.textContent = '❌ Wake Lock API not supported in this browser.';
        }
      } catch (err) {
        console.error(err);
        log.textContent = '❌ Failed to enable stay awake: ' + err.message;
      }
    }

    document.addEventListener('visibilitychange', () => {
      if (wakeLock !== null && document.visibilityState === 'visible') {
        stayAwake();
      }
    });
  </script>
</body>
</html>
